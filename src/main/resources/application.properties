spring.application.name=simpleapi
# PostgreSQL Connection Properties
spring.datasource.url=jdbc:postgresql://localhost:5432/simpleapi
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver
# JPA/Hibernate Properties
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
# /api-docs endpoint custom path
springdoc.api-docs.path=/api-docs
springdoc.api-docs.enabled=true
# IBM MQ Connection Properties
# JMS configuration
spring.jms.listener.auto-startup=true
# IBM MQ configuration
ibm.mq.queueManager=QM1
ibm.mq.channel=DEV.APP.SVRCONN
ibm.mq.connName=localhost(1414)
ibm.mq.user=admin
ibm.mq.password=admin123
ibm.mq.queue.name.request=REQUEST
ibm.mq.queue.name.response=RESPONSE
ibm.mq.useIBMCipherMappings=false
ibm.mq.transportType=CLIENT
# Connection pool settings
ibm.mq.pool.enabled=true
ibm.mq.pool.maxConnections=10
# Debugging
ibm.mq.clientDebug=true
logging.level.com.ibm.mq=DEBUG
server.max-http-request-header-size=10MB
logging.level.io.github.resilience4j=DEBUG
logging.level.org.springframework.aop=DEBUG
# Resilience4j Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.businessService.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.businessService.wait-duration-in-open-state=5s
resilience4j.circuitbreaker.instances.businessService.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.businessService.sliding-window-size=10
resilience4j.circuitbreaker.instances.businessService.sliding-window-type=count_based
resilience4j.circuitbreaker.instances.businessService.minimum-number-of-calls=5
# Auth Service Circuit Breaker (stricter settings for auth)
resilience4j.circuitbreaker.instances.authService.failure-rate-threshold=60
resilience4j.circuitbreaker.instances.authService.wait-duration-in-open-state=10s
resilience4j.circuitbreaker.instances.authService.permitted-number-of-calls-in-half-open-state=2
resilience4j.circuitbreaker.instances.authService.sliding-window-size=5
resilience4j.circuitbreaker.instances.authService.minimum-number-of-calls=3
# Resilience4j Retry Configuration
resilience4j.retry.instances.businessService.max-attempts=3
resilience4j.retry.instances.businessService.wait-duration=500ms
resilience4j.retry.instances.businessService.retry-exceptions=java.lang.Exception
# Auth Service Retry (fewer attempts, faster)
resilience4j.retry.instances.authService.max-attempts=2
resilience4j.retry.instances.authService.wait-duration=200ms
resilience4j.retry.instances.authService.retry-exceptions=java.lang.Exception
# Resilience4j Time Limiter Configuration
resilience4j.timelimiter.instances.businessService.timeout-duration=20s
resilience4j.timelimiter.instances.businessService.cancel-running-future=true
# Auth Service TimeLimiter (faster timeout for auth)
resilience4j.timelimiter.instances.authService.timeout-duration=20s
resilience4j.timelimiter.instances.authService.cancel-running-future=true
# Enable metrics and health indicators
management.endpoints.web.exposure.include=health,info,metrics,circuitbreakers,retries,timelimiters
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true
########################################################################################################################
#https://xmlserver-production.up.railway.app
#
#app.server.external.resource.base-url=https://xmlserver-production.up.railway.app
app.server.external.resource.base-url=http://localhost:443
app.server.external.resource.message-id-path=/api/messages/ids
app.server.external.resource.document-path=/api/documents
##############################Authentication##############################
app.server.external.oauth.base-url=${app.server.external.resource.base-url}
app.server.external.oauth.token-path=/oauth2/token
app.server.external.oauth.grant-type=client_credentials
# SpEL expression that creates a map
app.server.external.oauth.headers={'Authorization':'Basic Y3VzdG9tZXIxOmN1c3RvbWVyMQ==','Content-Type':'application/x-www-form-urlencoded','Accept':'application/json'}
##############################Authentication##############################
########################################################################################################################
# Base URLs for external services
api.auth.username=emilys
api.auth.password=emilyspass
api.auth.expiresInMins=30
api.auth.url=https://dummyjson.com/auth/login
api.product.url=https://dummyjson.com/products/add
# Configure the log pattern to include correlation ID
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] [${spring.application.name:}] [%X{correlationId:-}] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] [${spring.application.name:}] [%X{correlationId:-}] %-5level %logger{36} - %msg%n
